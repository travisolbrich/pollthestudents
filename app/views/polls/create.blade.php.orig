@extends('layouts.app')

<<<<<<< HEAD
@section('content')

<div class="row-fluid">
<div class="span9">
<h1>Create a Poll</h1>
    <div id="create">      
        <div class="poll-info">
            <label>Poll Prompt</label>
            <input id="prompt" type="text" placeholder="Where is a fun place to go at night?" checked/>
            
            <label>Make Public</label>
            <input id="isPublic" type="checkbox" checked/>
        </div>
        <button id="submit">Submit Poll</button>
    </div>

    <div id="success" class="hidden">            
        <div class="header">
            <h1>Success!</h1>
        </div>            
        <div class="poll-info">
            <p>Your new pool has been created!</p>
            <a class="share" href="/poll/view?id=">Share your Poll</a>
        </div>
    </div>
</div>

<div class="span3">
    <h5>Don't worry, you're in good hands!</h5>
    <canvas id="peoplewholike" width="200px" ></canvas>
</div>
=======
@section('pageContent')

<h1>Create a Poll</h1>
<div id="create">            
    <div class="header">
        <h1>New Poll</h1>
    </div>            
    <div class="poll-info">
        <label>Poll Prompt</label>
        <input id="prompt" type="text" placeholder="What is your favorite place to eat?" checked/>
        
        <label>Make Public</label>
        <input id="isPublic" type="checkbox" checked/>
    </div>
    <div class="poll-choices">
        <ul class="list">
            <li class="reference choice hidden">
                <input class="string" type="text" placeholder="Antonio's Pizza" checked/>
            </li>
        </ul>
        <button id="newChoice">New Choice</button>
    </div>
    
    <button id="submit">Submit Poll</button>
</div>

<div id="error" class="hidden">            
    <div class="header">
        <h1>Woops!</h1>
    </div>            
    <div id="poll-error">
        <p>An error occured. Try something different...</p>
    </div>
</div>

<div id="success" class="hidden">            
    <div class="header">
        <h1>Success!</h1>
    </div>            
    <div id="poll-info">
        <p>Your new pool has been created!</p>
        <a id="newPollLink" href="/poll/view?id=">Share your Poll</a>
    </div>
>>>>>>> 185aca61d5823f200eb79f7a212efad86177c5a3
</div>
@stop

@section('javascripts')
    <script type="text/javascript">
        var pieData = [
                {
                    value: 99,
                    color:"#51a351"
                },
                {
                    value : 2,
                    color : "#bd362f"
                }            
            ];

<<<<<<< HEAD
        //Get the context of the canvas element we want to select
        var myPie = new Chart(document.getElementById("peoplewholike").getContext("2d")).Pie(pieData);
        
        var poll = new POLL.MODEL.Poll(),
            pollRegistry = new POLL.REGISTRY.PollRegistry(),
            hideCreate,
            showSuccess,
=======
<script type="text/javascript">
    
    $(document).ready(function() {
        
        var poll = new POLL.MODEL.Poll(),
            pollRegistry = new POLL.REGISTRY.PollRegistry(),
            createChoice,
            hideCreate,
            showSuccess,
            showError,
>>>>>>> 185aca61d5823f200eb79f7a212efad86177c5a3
            pollSuccess,
            pollFailure;
        
        $( "#isPublic" ).change(function() {
            
            var value = $( "#isPublic" ).val();
            poll.setPrompt(value);
        });
        
        $( "#prompt" ).change(function() {
<<<<<<< HEAD
            
=======
>>>>>>> 185aca61d5823f200eb79f7a212efad86177c5a3
            var value = $( "#prompt" ).val();
            poll.setPrompt(value);
        });
        
<<<<<<< HEAD
        $( "#submit" ).change(function() {
            pollRegistry.create(poll, pollSuccess, pollFailure);
        });
        
        hideCreate = function () {
            
            //$("#success").
            
        };
        
        showSuccess = function () {
            
        };
        
        pollSuccess = function (html) {
          alert('successful : ' + html);
            //Share your poll here or whatever.
          $("#result").html("Successful");
        };
        
        pollError = function(data, errorThrown){
          alert('request failed :'+errorThrown);
        };
        
    </script>
=======
        $( "#newChoice" ).click(function() {
            createChoice();
        });
        
        $( "#submit" ).click(function() {
            
            //Create options for each option.
            var choices = [], 
                choiceListing = $(".poll-choices .list");
    
            $(this).find('li').each(function(){
                // cache jquery var
                var current = $(this);
                
                if(current.hasClass("hidden") == false)
                {
                    var choice = new POLL.MODEL.Choice(),
                        value = current.find("string");
                    
                    if(value !== ""){
                        choice.setName(value);
                        choices.push(choice);
                    }
                }
            });
            
            poll.setChoices(choices);
            pollRegistry.create(poll, pollSuccess, pollFailure);
        });
        
        createChoice = function () {
          
            var choiceList = $(".poll-choices .list"),
                choiceReference = choiceList.find(".reference"),
                clone = choiceReference.clone(true);
            
            clone.toggleClass("hidden");
            clone.toggleClass("reference");
            clone.appendTo(choiceList);
        };
                
        hideCreate = function () {
            $("#create").toggleClass("hidden");
        };
        
        showSuccess = function (pollId) {
            $("#success").toggleClass("hidden");
            hideCreate();
            
            var address = "/poll/" + pollId;
            $('newPollLink').attr('href',('/poll/view?id='+pollId));
        };
        
        showError = function () {
            $("#error").toggleClass("hidden");
        };
        
        pollSuccess = function (html) {
            showSuccess();
        };
        
        pollError = function(data, errorThrown){
            showError();
        };
        
    });
</script>

>>>>>>> 185aca61d5823f200eb79f7a212efad86177c5a3
@stop